<!DOCTYPE html>
<html>
<head>
    <style>html { font-size: 14px; font-family: Arial, Helvetica, sans-serif; }</style>
    <title></title>
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2020.2.617/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2020.2.617/styles/kendo.default.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2020.2.617/styles/kendo.default.mobile.min.css" />
    
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">    

    <script src="https://kendo.cdn.telerik.com/2020.2.617/js/jquery.min.js"></script>
    
    
    <script src="https://kendo.cdn.telerik.com/2020.2.617/js/kendo.all.min.js"></script>
    
    

</head>
<body>
  <script src="./現行比賽.js"></script>
  <script src="./過往比賽.js"></script>  

  <div style="margin-left:30px; margin-right:30px" id="header">
    <img src="%E6%B8%85%E8%8F%AF%E5%A4%A7%E5%AD%B8logo.jpg"></img>
    <br>
    <button id="登出入按鈕" style="font-size:20px;" onclick="登出入按鈕click()">登入</button> <a id="登出入訊息">請登入進行管理比賽</a>
  </div>
  
  <div style="height: 50px"></div>
  
  <div style="margin-left:30px; margin-right:30px" id="現行比賽">
    <a style="font-size:30px; font-weight:bold;"><i style="color: dimgray" class="fa fa-trophy"></i> 現行比賽</a>
    <button id="建立新比賽按鈕" style="margin-left:20px; font-size:20px; height:40px; vertical-align:top" onclick="建立新比賽按鈕click()">建立新比賽</button>
      <div style="height: 10px"></div>
    <div id="現行比賽表格"></div>
  </div>
  
  <div style="height: 50px"></div>
  
  <div style="margin-left:30px; margin-right:30px" id="過往比賽">  
    <h1><i style="color: dimgray" class="fa fa-history"></i> 過往比賽 </h1>
    <div id="過往比賽表格"></div>
  </div>

  <script>
    var 已登入 = false;
    
    var schemaModel = {
          fields: {
            比賽日期: { type: "string" },
            比賽名稱: { type: "string" },
            時間範圍: { type: "string" },
            截止時間: { type: "string" },            
            人數限制: { type: "number" },
            報名人數: { type: "number" },
            比賽種類: { type: "string" }, 
            比賽距離: { type: "string" },             
            Discontinued: {
              type: "number"
            },
            QuantityPerUnit: {
              type: "string"
            }
          }
        };
    
    $(document).ready(function() {
      $("#現行比賽表格").kendoGrid({
        dataSource: {
          data: games,
          schema: {
            model: schemaModel
          },
          pageSize: 20
        },
        height: 300,
        toolbar: ["search"],
        scrollable: true,
        sortable: true,
        filterable: true,
        pageable: {
          input: true,
          numeric: false
        },
        columns: [{
            field: "比賽日期",
            //format: "{0:MM/dd/yyyy}",
            //format: "{0:yyyy-MM-dd}",
            title: "比賽日期",
            width: "100px"
          },
          {
            field: "比賽名稱",
            //template: "<div><a> #: 比賽名稱 # </a><br>aaa</div>",
            //width: "230px"
          },
          {
            field: "時間範圍",
            //title: "時間範圍",
            width: "105px"
          },
          {
            field: "截止時間",
            //title: "報名截止時間",
            width: "130px"
          },
          {
            field: "人數限制",
            //title: "人數限制",
            width: "105px"
          },
          {
            field: "報名人數",
            //title: "報名人數",
            width: "105px"
          },      
          {
            field: "比賽種類",
            //title: "比賽種類",
            width: "105px"
          },
          {
            field: "比賽距離",
            //title: "比賽距離",
            width: "130px"
          },                  
          {
            field: "CategoryID ",
            title: " ",
            template: "<div onclick='infoClick(this)'><i class='fa fa-pencil-square-o'></i></div>",
            width:"50px",
            filterable: false            
          }
        ]
      });
      
      $("#過往比賽表格").kendoGrid({
        dataSource: {
          data: gamehistory,
          schema: {
            model: schemaModel
          },
          pageSize: 20
        },
        height: 300,
        toolbar: ["search"],
        scrollable: true,
        sortable: true,
        filterable: true,
        pageable: {
          input: true,
          numeric: false
        },
        columns: [{
            field: "比賽日期",
            //format: "{0:MM/dd/yyyy}",
            //format: "{0:yyyy-MM-dd}",
            title: "比賽日期",
            width: "100px"
          },
          {
            field: "比賽名稱",
            //template: "<div><a> #: 比賽名稱 # </a><br>aaa</div>",
            //width: "230px"
          },
          {
            field: "時間範圍",
            //title: "時間範圍",
            width: "105px"
          },
          {
            field: "截止時間",
            //title: "報名截止時間",
            width: "130px"
          },
          {
            field: "人數限制",
            //title: "人數限制",
            width: "105px"
          },
          {
            field: "報名人數",
            //title: "報名人數",
            width: "105px"
          },      
          {
            field: "比賽種類",
            //title: "比賽種類",
            width: "105px"
          },
          {
            field: "比賽距離",
            //title: "比賽距離",
            width: "130px"
          },                  
          {
            field: "CategoryID ",
            title: " ",
            template: "<div onclick='infoClick(this)'><i class='fa fa-info-circle'></i></div>",
            width:"50px",
            filterable: false            
          }
        ]
      });      
      
    });
    
   
//    function cellClick(e) {
//      var grid = $("#grid").data("kendoGrid");
//      var dataItem = grid.dataItem($(e).closest("tr"));
//      if (dataItem.Discontinued) {
//        dataItem.set("Discontinued", false);
//      } else {
//        dataItem.set("Discontinued", true);
//      }
//    }
    
    function infoClick(e) {
      console.log("info click");
      var 現行比賽表格 = $("#現行比賽表格").data("kendoGrid");
      var dataItem = 現行比賽表格.dataItem($(e).closest("tr"));
      console.log(dataItem.ProductName);
    }
    
    function 登出入按鈕click() {
      console.log("登出入按鈕click", );
      if (已登入) {
        $("#登出入按鈕").html("登入");
        $("#登出入訊息").html("請登入進行管理比賽");        
        已登入 = false;
        console.log("已登出");
      } else {
        $("#登出入按鈕").html("登出");
        已登入 = true;       
        $("#登出入訊息").html("已登入，不用時請登出");          
        console.log("已登入");
      }
    }
    
    
    function 建立新比賽按鈕click(){
      console.log("建立新比賽")
    }
    
  </script>
  
  <style>
    #grid {
/*      padding: .6em 1.3em .6em .4em;*/
/*      font-size: 20px;*/
    }
  </style>
    
</div>
</body>
</html>